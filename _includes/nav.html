<!-- Navigation -->

{% assign sandbox_exists = false %}

{% for file in site.pages %}
  {% if file.path contains 'sandbox/' %}
    {% assign sandbox_exists = true %}
    {% break %}
  {% endif %}
{% endfor %}

<nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
  <div class="container">
  <a class="navbar-brand js-scroll-trigger" href="/{{ site.baseurl }}#page-top">
        {%- if site.logo -%}
          <img height="{{ site.logo.height | default: 52 }}" src="{{ site.logo.path }}"/>
        {%- else -%}
          {{ site.title }}
        {%- endif -%}
    </a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      Menu
      <i class="fas fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav text-uppercase ml-auto">
      {% if site.locale and site.locale != "" and site.locale != nil %}
      {% assign nav = site.data.navigation[site.locale].nav %}
      {%- else -%}
      {% assign nav = site.data.navigation.nav %}
      {%- endif -%}
      {% for link in nav %}
      {%- if link.url -%}
      {% assign link_target = link.url %}
      {%- elsif link.section -%}
      {% assign link_target = "/#" | append: link.section %}
      {%- else -%}
      {% assign link_target = "/" %}
      {%- endif -%}
      
      {% if link.subpages %}
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle js-scroll-trigger" href="{{ link_target }}" aria-expanded="true">{{ link.title }}</a>
          <ul class="dropdown-menu">
            {% for page in link.subpages %}
            <li ><a class="dropdown-item js-scroll-trigger" href="{{ page.url }}">{{ page.title }}</a></li>
            {% endfor %}
          </ul>
          {% else %}
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="{{ link_target }}">{{ link.title }}</a>
          {% endif %}
        </li>
      {% endfor %}
      {% if sandbox_exists %}
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="/{{ site.baseurl }}/sandbox/">Sandbox</a>
          <ul class="dropdown-menu">
            {% for page in site.pages %}
            {% if page.path contains 'sandbox/' %}
              <li><a class="dropdown-item" href="{{ site.baseurl }}/{{ page.path }}">{{ page.path | split: '/' | last | split: '.' | first}}</a></li>
            {% endif %}
            {% endfor %}
        </li>
      {% endif %}
      </ul>
    </div>
  </div>
</nav>
<!-- End Navigation -->
  <script>
  document.addEventListener('DOMContentLoaded', function () {
   const dropdowns = document.querySelectorAll('.dropdown');
 
   dropdowns.forEach(dropdown => {
     dropdown.addEventListener('mouseenter', function () {
       const menu = this.querySelector('.dropdown-menu');
       menu.classList.add('show');
     });
 
     dropdown.addEventListener('mouseleave', function () {
       const menu = this.querySelector('.dropdown-menu');
       menu.classList.remove('show');
     });
   });
 });
 </script>
